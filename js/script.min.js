let xhr=new XMLHttpRequest;xhr.open("get","../KCtravel.json",!0),xhr.send(null),xhr.onload=function(){function e(){const e=a.length;let t="";const n=Math.ceil(e/10),l=[];for(let e=0;e<n;e++)l.push(e),t+='<li data-num="'+(e+1)+'"><a href="#">'+(e+1)+"</a></li>";pageContent='<li class="prev disabled" data-num="0"><a href="#">< prev</a></li>'+t+'<li class="next" data-num="'+(l.length+1)+'"><a href="#">next ></a></li>',c.innerHTML=pageContent;const i=document.querySelectorAll(".pager li");i[1].setAttribute("class","active")}function t(){const e=window.location.href,t=document.querySelectorAll(".imgLink a"),n=document.querySelectorAll(".ticketInfo");for(let l=0;l<t.length;l++)t[l].href===e&&t[l].remove(),""===n[l].textContent&&n[l].remove()}function n(e){if(e.preventDefault(),"A"!==e.target.nodeName)return;const n=document.querySelectorAll(".pager li"),l=document.querySelector(".prev"),i=document.querySelector(".next"),s=n.length,o=e.target.parentNode.dataset.num,r=s-1,c=s-2;let u,p;if(o==r){const e=parseInt(document.querySelector(".active").dataset.num);if(e==c)return;u=10*e,p=10*(e+1),e==s-3&&(p=a.length);const t=e+1;for(let e=1;e<s;e++)n[e].setAttribute("class","");n[t].setAttribute("class","active")}else if(0==o){const e=parseInt(document.querySelector(".active").dataset.num);if(1==e)return;u=10*(e-2),p=10*(e-1);const t=e-1;for(let e=1;e<s;e++)n[e].setAttribute("class","");n[t].setAttribute("class","active")}else if(o==c){for(let e=1;e<s;e++)n[e].setAttribute("class","");u=10*(c-1),p=a.length,n[c].setAttribute("class","active")}else{for(let e=1;e<s;e++)n[e].setAttribute("class","");for(let e=0;e<s;e++)if(o==n[e].textContent){u=10*(e-1),p=10*e,n[e].setAttribute("class","active");break}}p>10&&p<a.length?(l.className="prev",i.className="next"):10==p?(l.className="prev disabled",i.className="next"):p==a.length&&(l.className="prev",i.className="next disabled");let d="";for(let e=u;e<p;e++)d+='<li><div class="imgLink" style="background-image: url('+a[e].Picture1+');"><a href="'+a[e].Website+'">'+a[e].Name+"</a><span>"+a[e].Name+"</span><span>"+a[e].Zone+"</span></div><ul><li><span>"+a[e].Opentime+"</span></li><li><span>"+a[e].Add+"</span></li><li><span>"+a[e].Tel+'</span></li></ul><div class="ticketInfo">'+a[e].Ticketinfo+"</div>";document.querySelector(".list").innerHTML=d;const m=document.querySelector(".listName").getBoundingClientRect(),f=window.pageYOffset+m.top;window.scroll(0,f),t()}function l(n){const l=n.target.value;let i=0,s="";for(let e=0;e<a.length;e++){if(0==l){if(c.style.display="block",o.textContent="高雄市景點",s+='<li><div class="imgLink" style="background-image: url('+a[e].Picture1+');"><a href="'+a[e].Website+'">'+a[e].Name+"</a><span>"+a[e].Name+"</span><span>"+a[e].Zone+"</span></div><ul><li><span>"+a[e].Opentime+"</span></li><li><span>"+a[e].Add+"</span></li><li><span>"+a[e].Tel+'</span></li></ul><div class="ticketInfo">'+a[e].Ticketinfo+"</div>",9==i)break;++i}0!==l&&l===a[e].Zone&&(c.style.display="none",o.textContent=a[e].Zone,s+='<li><div class="imgLink" style="background-image: url('+a[e].Picture1+');"><a href="'+a[e].Website+'">'+a[e].Name+"</a><span>"+a[e].Name+"</span><span>"+a[e].Zone+"</span></div><ul><li><span>"+a[e].Opentime+"</span></li><li><span>"+a[e].Add+"</span></li><li><span>"+a[e].Tel+'</span></li></ul><div class="ticketInfo">'+a[e].Ticketinfo+"</div>")}document.querySelector(".list").innerHTML=s,e(),t()}function i(e){if("LI"!==e.target.nodeName)return;c.style.display="none";const n=e.target,l=e.target.textContent;for(let e=0;e<p.length;e++)if(l==p[e]){const t=e+2;s.options[t].selected=!0}o.textContent=l;let i="";if("LI"===n.nodeName){for(let e=0;e<a.length;e++)n.textContent==a[e].Zone&&(i+='<li><div class="imgLink" style="background-image: url('+a[e].Picture1+');"><a href="'+a[e].Website+'">'+a[e].Name+"</a><span>"+a[e].Name+"</span><span>"+a[e].Zone+"</span></div><ul><li><span>"+a[e].Opentime+"</span></li><li><span>"+a[e].Add+"</span></li><li><span>"+a[e].Tel+'</span></li></ul><div class="ticketInfo">'+a[e].Ticketinfo+"</div>");document.querySelector(".list").innerHTML=i,t()}}const a=JSON.parse(xhr.responseText),s=document.getElementById("selBlock"),o=document.querySelector(".listName"),r=document.querySelector(".hotBlock"),c=document.querySelector(".pager ul");s.addEventListener("change",l),r.addEventListener("click",i),c.addEventListener("click",n);const u=[];for(let e=0;e<a.length;e++)u.push(a[e].Zone);const p=[];u.forEach(function(e){-1==p.indexOf(e)&&p.push(e)});let d="";for(var m=0;m<p.length;m++)d+='<option value="'+p[m]+'">'+p[m]+"</option>";const f='<option disabled>- - 請選擇行政區 - -</option> <option value="0">全部</option>'+d;s.innerHTML=f,o.textContent="高雄市景點";let g="";for(let e=0;e<10;e++)g+='<li><div class="imgLink" style="background-image: url('+a[e].Picture1+');"><a href="'+a[e].Website+'">'+a[e].Name+"</a><span>"+a[e].Name+"</span><span>"+a[e].Zone+"</span></div><ul><li><span>"+a[e].Opentime+"</span></li><li><span>"+a[e].Add+"</span></li><li><span>"+a[e].Tel+'</span></li></ul><div class="ticketInfo">'+a[e].Ticketinfo+"</div>";document.querySelector(".list").innerHTML=g,e(),t()};