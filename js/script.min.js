var xhr=new XMLHttpRequest;xhr.open("get","https://data.kcg.gov.tw/api/action/datastore_search?resource_id=92290ee5-6e61-456f-80c0-249eae2fcc97",!0),xhr.send(null),xhr.onload=function(){function e(){const e=n.result.records.length;let t="";const r=Math.ceil(e/10),s=[];for(let e=0;e<r;e++)s.push(e),t+='<li data-num="'+(e+1)+'"><a href="#">'+(e+1)+"</a></li>";pageContent='<li class="prev disabled" data-num="0"><a href="#">< prev</a></li>'+t+'<li class="next" data-num="'+(s.length+1)+'"><a href="#">next ></a></li>',i.innerHTML=pageContent;const l=document.querySelectorAll(".pager li");l[1].setAttribute("class","active")}function t(){const e=window.location.href,t=document.querySelectorAll(".imgLink a"),r=document.querySelectorAll(".ticketInfo");for(let s=0;s<t.length;s++)t[s].href===e&&t[s].remove(),""===r[s].textContent&&r[s].remove()}function r(e){if(e.preventDefault(),"A"!==e.target.nodeName)return;const r=document.querySelectorAll(".pager li"),s=document.querySelector(".prev"),l=document.querySelector(".next"),o=r.length,a=e.target.parentNode.dataset.num,c=o-1,i=o-2;let u,d;if(a==c){const e=parseInt(document.querySelector(".active").dataset.num);if(e==i)return;u=10*e,d=10*(e+1);const t=e+1;for(let e=1;e<o;e++)r[e].setAttribute("class","");r[t].setAttribute("class","active")}else if(0==a){const e=parseInt(document.querySelector(".active").dataset.num);if(1==e)return;u=10*(e-2),d=10*(e-1);const t=e-1;for(let e=1;e<o;e++)r[e].setAttribute("class","");r[t].setAttribute("class","active")}else if(a==i){for(let e=1;e<o;e++)r[e].setAttribute("class","");u=10*(i-1),d=n.result.records.length,r[i].setAttribute("class","active")}else{for(let e=1;e<o;e++)r[e].setAttribute("class","");for(let e=0;e<o;e++)if(a==r[e].textContent){u=10*(e-1),d=10*e,r[e].setAttribute("class","active");break}}d>10&&d<n.result.records.length?(s.className="prev",l.className="next"):10==d?(s.className="prev disabled",l.className="next"):d==n.result.records.length&&(s.className="prev",l.className="next disabled");let p="";for(let e=u;e<d;e++)p+='<li><div class="imgLink" style="background-image: url('+n.result.records[e].Picture1+');"><a href="'+n.result.records[e].Website+'">'+n.result.records[e].Name+"</a><span>"+n.result.records[e].Name+"</span><span>"+n.result.records[e].Zone+"</span></div><ul><li><span>"+n.result.records[e].Opentime+"</span></li><li><span>"+n.result.records[e].Add+"</span></li><li><span>"+n.result.records[e].Tel+'</span></li></ul><div class="ticketInfo">'+n.result.records[e].Ticketinfo+"</div>";document.querySelector(".list").innerHTML=p,t()}function s(r){const s=r.target.value;let l=0,o="";for(let e=0;e<n.result.records.length;e++){if(0==s){if(i.style.display="block",a.textContent="高雄市景點",o+='<li><div class="imgLink" style="background-image: url('+n.result.records[e].Picture1+');"><a href="'+n.result.records[e].Website+'">'+n.result.records[e].Name+"</a><span>"+n.result.records[e].Name+"</span><span>"+n.result.records[e].Zone+"</span></div><ul><li><span>"+n.result.records[e].Opentime+"</span></li><li><span>"+n.result.records[e].Add+"</span></li><li><span>"+n.result.records[e].Tel+'</span></li></ul><div class="ticketInfo">'+n.result.records[e].Ticketinfo+"</div>",9==l)break;++l}0!==s&&s===n.result.records[e].Zone&&(i.style.display="none",a.textContent=n.result.records[e].Zone,o+='<li><div class="imgLink" style="background-image: url('+n.result.records[e].Picture1+');"><a href="'+n.result.records[e].Website+'">'+n.result.records[e].Name+"</a><span>"+n.result.records[e].Name+"</span><span>"+n.result.records[e].Zone+"</span></div><ul><li><span>"+n.result.records[e].Opentime+"</span></li><li><span>"+n.result.records[e].Add+"</span></li><li><span>"+n.result.records[e].Tel+'</span></li></ul><div class="ticketInfo">'+n.result.records[e].Ticketinfo+"</div>")}document.querySelector(".list").innerHTML=o,e(),t()}function l(e){if("LI"!==e.target.nodeName)return;i.style.display="none";const r=e.target,s=e.target.textContent;for(var l=0;l<d.length;l++)if(s==d[l]){var c=++l;o.options[c].selected=!0}a.textContent=s;let u="";if("LI"===r.nodeName){for(let e=0;e<n.result.records.length;e++)r.textContent==n.result.records[e].Zone&&(u+='<li><div class="imgLink" style="background-image: url('+n.result.records[e].Picture1+');"><a href="'+n.result.records[e].Website+'">'+n.result.records[e].Name+"</a><span>"+n.result.records[e].Name+"</span><span>"+n.result.records[e].Zone+"</span></div><ul><li><span>"+n.result.records[e].Opentime+"</span></li><li><span>"+n.result.records[e].Add+"</span></li><li><span>"+n.result.records[e].Tel+'</span></li></ul><div class="ticketInfo">'+n.result.records[e].Ticketinfo+"</div>");document.querySelector(".list").innerHTML=u,t()}}const n=JSON.parse(xhr.responseText),o=document.getElementById("selBlock"),a=document.querySelector(".listName"),c=document.querySelector(".hotBlock"),i=document.querySelector(".pager ul");o.addEventListener("change",s),c.addEventListener("click",l),i.addEventListener("click",r);const u=[];for(let e=0;e<n.result.records.length;e++)u.push(n.result.records[e].Zone);const d=[];u.forEach(function(e){-1==d.indexOf(e)&&d.push(e)});let p="";for(var m=0;m<d.length;m++)p+='<option value="'+d[m]+'">'+d[m]+"</option>";const f='<option disabled>- - 請選擇行政區 - -</option> <option value="0">全部</option>'+p;o.innerHTML=f,a.textContent="高雄市景點";let v="";for(let e=0;e<10;e++)v+='<li><div class="imgLink" style="background-image: url('+n.result.records[e].Picture1+');"><a href="'+n.result.records[e].Website+'">'+n.result.records[e].Name+"</a><span>"+n.result.records[e].Name+"</span><span>"+n.result.records[e].Zone+"</span></div><ul><li><span>"+n.result.records[e].Opentime+"</span></li><li><span>"+n.result.records[e].Add+"</span></li><li><span>"+n.result.records[e].Tel+'</span></li></ul><div class="ticketInfo">'+n.result.records[e].Ticketinfo+"</div>";document.querySelector(".list").innerHTML=v,e(),t()};